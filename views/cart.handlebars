<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Carrito</title>
  <link rel="stylesheet" href="/css/styles.css">

</head>

<body class="cart">
  <h1>Tu carrito</h1>

  <div class="cart-products" >
    {{#if cart.products.length}}
    {{#each cart.products}}
    <img class="cart" src="{{this.product.image}}" alt="{{this.product.title}}" width="150">
    <h3>{{this.product.title}}</h3>
    <p>{{this.product.description}}</p>
    <p>Precio unitario: ${{this.product.price}}</p>
    <p>Cantidad actual: {{this.quantity}}</p>

    <form action="/cart/add-more/{{this.product._id}}" method="POST">
      <input type="number" name="quantity" value="{{this.quantity}}" min="1" max="{{this.product.stock}}">
      <button type="submit">Actualizar cantidad</button>
    </form>

    <p>Subtotal: ${{multiply this.product.price this.quantity}}</p>



    <form action="/cart/remove/{{this.product._id}}" method="POST">
      <button type="submit">Eliminar del carrito</button>
    </form>
    {{/each}}

    <h2 class="cart">Total: ${{total}}</h2>

    <form action="/cart/{{cart._id}}/purchase" method="POST">
      <button class="cart" type="submit">Finalizar compra</button>
    </form>

    {{else}}
    <p class="cart">El carrito está vacío.</p>
    {{/if}}

    <a class="cart" href="/">Volver a la tienda</a>
  </div>


</body>

</html>